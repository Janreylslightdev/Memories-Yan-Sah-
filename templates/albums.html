{% extends "base.html" %}

{% block title %}My Albums{% endblock %}

{% block content %}
<div class="albums-container">
    <h2>📁 My Albums</h2>
    <a href="{{ url_for('albums.create_album') }}" class="btn">➕ Create New Album</a>
    <div class="albums-grid">
        {% for album in albums %}
            <div class="album-card">
                {% if album.cover_image %}
                    <div style="width: 100%; height: 150px; overflow: hidden; border-radius: 8px; margin-bottom: 1rem; position: relative;">
                        <img src="{{ url_for('static', filename='uploads/' + album.cover_image.filename) }}"
                             alt="Cover photo" style="width: 100%; height: 100%; object-fit: cover;">
                        <div style="position: absolute; top: 8px; right: 8px; background: rgba(0,0,0,0.7); color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.75rem;">Cover</div>
                    </div>
                {% elif album.images %}
                    <div style="width: 100%; height: 150px; overflow: hidden; border-radius: 8px; margin-bottom: 1rem; position: relative;">
                        <img src="{{ url_for('static', filename='uploads/' + album.images[-1].filename) }}"
                             alt="Latest photo" style="width: 100%; height: 100%; object-fit: cover;">
                        <div style="position: absolute; top: 8px; right: 8px; background: rgba(0,0,0,0.7); color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.75rem;">Latest</div>
                    </div>
                {% else %}
                    <div style="width: 100%; height: 150px; background: linear-gradient(135deg, #f3f4f6, #e5e7eb); border-radius: 8px; margin-bottom: 1rem; display: flex; align-items: center; justify-content: center; color: #9ca3af; font-size: 3rem;">
                        📷
                    </div>
                {% endif %}
                <h3>{{ album.name }}</h3>
                <p>{{ album.images|length }} images</p>
                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                    <a href="{{ url_for('albums.view_album', album_id=album.id) }}" class="btn" style="flex: 1; text-align: center; min-width: 80px;">👁️ View Album</a>
                    {% if album.images %}
                        <a href="{{ url_for('albums.set_cover', album_id=album.id) }}" class="btn" style="background: linear-gradient(135deg, #f59e0b, #d97706); flex: 1; text-align: center; min-width: 80px;">⭐ Set Cover</a>
                    {% endif %}
                    <form method="POST" action="{{ url_for('albums.delete_album', album_id=album.id) }}" style="display: inline; flex: 1; min-width: 80px;" onsubmit="return confirm('Are you sure you want to delete this album and all its images? This action cannot be undone.');">
                        <button type="submit" class="btn" style="background: linear-gradient(135deg, #dc2626, #b91c1c); width: 100%;">🗑️ Delete Album</button>
                    </form>
                </div>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
